webpackJsonp([1],{119:function(t,e,n){"use strict";t.exports=function(){return new Worker(n.p+"b3ff83271d61385337da.worker.js")}},179:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.deviceId=function(){return device.uuid}},201:function(t,e,n){"use strict"},202:function(t,e){},204:function(t,e,n){"use strict";var r,a=n(205),i=(r=a)&&r.__esModule?r:{default:r};i.default.install({onUpdateReady:function(){console.log("update ready"),i.default.applyUpdate()},onUpdated:function(){console.log("updated"),location.reload()}})},82:function(t,e,n){"use strict";n(83);var r=n(85);n(202),n(203);var a=!!window.cordova;n(204),r.app.$mount("#app"),document.addEventListener("deviceready",function(){console.log("Device is ready!"),console.log(a)},!1),a&&(console.log("This is cordova"),document.addEventListener("deviceready",r.app.$mount("#app"),!1))},83:function(t,e,n){"use strict";var r,a=n(57),i=(r=a)&&r.__esModule?r:{default:r};window.Promise=window.Promise||i.default},85:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.store=e.router=e.app=void 0;var r=d(n(31)),a=n(86),i=d(n(87)),u=d(n(94)),o=d(n(98)),s=d(n(180)),l=d(n(199)),c=d(n(200));function d(t){return t&&t.__esModule?t:{default:t}}var f=n(201);(0,a.sync)(o.default,u.default),r.default.mixin({methods:{convertTimeHHMMSS:function(t){var e=new Date(1e3*t).toISOString().substr(11,8);return 0===e.indexOf("00:")?e.substr(3):e},formatMilliseconds:function(t){var e=t/6e4,n=Math.floor(e),r=Math.floor(60*(e-n));return(n>9?n:"0"+n)+":"+(r>9?r:"0"+r)}}}),r.default.use(l.default,s.default),r.default.use(c.default),r.default.use(f);var p=new r.default(Object.assign({router:u.default,store:o.default},i.default));e.app=p,e.router=u.default,e.store=o.default},87:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=u(n(32));n(88);var a=u(n(89)),i=u(n(90));function u(t){return t&&t.__esModule?t:{default:t}}e.default={data:function(){return{open:!1}},components:{Sidebar:a.default},created:function(){this.$store.dispatch("setupCloudRefs")},render:function(t){var e=this;return t("v-app",{attrs:{id:"app"}},[t("v-navigation-drawer",(0,r.default)([{attrs:{id:"sidebar",fixed:!0,clipped:!0,app:!0,value:e.open},on:{input:function(t){e.open=t}}},{directives:[{name:"model",value:e.open}]}]),[t(a.default,null,[])]),this.header(),t("v-content",null,[t("v-container",{attrs:{fluid:!0,"fill-height":!0}},[t("router-view",null,[])])]),t(i.default,null,[])])},methods:{_openDrawer:function(){this.open=!this.open},header:function(){var t=this,e=this.$createElement;return e("v-toolbar",{attrs:{id:"header",color:"blue darken-3",dark:!0,app:!0,"clipped-left":!0,fixed:!0}},[e("v-toolbar-title",{style:this.$vuetify.breakpoint.smAndUp?"width: 300px; min-width: 250px":"min-width: 72px",class:"ml-0 pl-3"},[e("v-toolbar-side-icon",{on:{click:function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];(function(){return t._openDrawer()}).apply(void 0,[e].concat(r))}}},[]),e("span",{class:"hidden-xs-only"},[this.$route.name?this.$route.name:this.$route.path])])])}}}},88:function(t,e){},89:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,a=n(32),i=(r=a)&&r.__esModule?r:{default:r},u=n(22);e.default={name:"Sidebar",props:["open"],computed:Object.assign({},(0,u.mapGetters)(["currentTrack"])),render:function(){var t=this,e=arguments[0];return e("v-list",{attrs:{"two-line":!0,subheader:!0}},[e("v-subheader",null,["Music"]),e("v-list-tile",(0,i.default)([{attrs:{avatar:!0}},{on:{click:function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];(function(){return t.$router.push({name:"Now Playing"})}).apply(void 0,[e].concat(r))}}}]),[e("v-list-tile-action",null,[e("v-icon",null,["play_arrow"])]),this.currentTrack?e("v-list-tile-content",null,[e("v-list-tile-title",null,["Now Playing"]),e("v-list-tile-sub-title",null,[this.currentTrack.name," - ",this.currentTrack.artist.name])]):e("v-list-tile-content",{style:"opacity:0.5"},[e("v-list-tile-title",null,["Now Playing"]),e("v-list-tile-sub-title",null,["Nothing playing"])])]),e("v-list-tile",(0,i.default)([{attrs:{avatar:!0}},{on:{click:function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];(function(){return t.$router.push({name:"Library"})}).apply(void 0,[e].concat(r))}}}]),[e("v-list-tile-action",null,[e("v-icon",null,["library_music"])]),e("v-list-tile-content",null,[e("v-list-tile-title",null,["Library"]),e("v-list-tile-sub-title",null,["View music library"])])]),e("v-subheader",null,["Settings"]),e("v-list-tile",(0,i.default)([{attrs:{avatar:!0}},{on:{click:function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];(function(){return t.$router.push({name:"Sync"})}).apply(void 0,[e].concat(r))}}}]),[e("v-list-tile-action",null,[e("v-icon",null,["import_export"])]),e("v-list-tile-content",null,[e("v-list-tile-title",null,["Cloud sync"]),e("v-list-tile-sub-title",null,["Cloud library settings"])])]),e("v-list-tile",(0,i.default)([{attrs:{avatar:!0}},{on:{click:function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];(function(){return t.$router.push({name:"Import"})}).apply(void 0,[e].concat(r))}}}]),[e("v-list-tile-action",null,[e("v-icon",null,["library_add"])]),e("v-list-tile-content",null,[e("v-list-tile-title",null,["Import iTunes"]),e("v-list-tile-sub-title",null,["Import local iTunes library"])])])])}}},90:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=u(n(32)),a=u(n(60)),i=n(22);function u(t){return t&&t.__esModule?t:{default:t}}function o(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function r(a,i){try{var u=e[a](i),o=u.value}catch(t){return void n(t)}if(!u.done)return Promise.resolve(o).then(function(t){r("next",t)},function(t){r("throw",t)});t(o)}("next")})}}n(93),e.default={data:function(){return{state:"stopped",timings:{progress:0,currentTime:"0:00",totalDuration:{raw:0,pretty:"0:00"}}}},computed:Object.assign({},(0,i.mapState)(["theTrack"]),(0,i.mapGetters)(["deviceId"]),{audioObject:{get:function(){return this.theTrack},set:function(t){this.$store.commit("THE_TRACK_SETTER",t)}},source:function(){var t=o(a.default.mark(function t(){var e;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.deviceId;case 2:if(!(e=t.sent)||!this.track.src[e]){t.next=8;break}return console.log(this.track.name+": Playing from local machine"),t.abrupt("return",this.track.src[e]);case 8:if(!this.track.src.cloud){t.next=13;break}return console.log(this.track.name+": Playing from cloud"),t.next=12,this.getTrackCloudSrc(this.track.uuid);case 12:return t.abrupt("return",t.sent);case 13:return t.abrupt("return",!1);case 14:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),track:function(){return this.$store.getters.currentTrack||{artist:{},album:{}}}}),created:function(){this.audioObject.src&&(this._handleLoaded(),this._handlePlayingUI()),this.audioObject.addEventListener("timeupdate",this._handlePlayingUI),this.audioObject.addEventListener("loadeddata",this._handleLoaded)},methods:Object.assign({},(0,i.mapActions)(["getTrackCloudSrc"]),{_handlePlayingUI:function(){var t=parseInt(this.audioObject.currentTime);this.timings.progress=(t/this.timings.totalDuration.raw*100).toFixed(1),this.timings.currentTime=this.convertTimeHHMMSS(t)},_handleLoaded:function(){var t=parseInt(this.audioObject.duration);this.timings.totalDuration={raw:t,pretty:this.convertTimeHHMMSS(t)}},_jumpToTime:function(t){console.log(t);var e=t.pageX/t.screenX*100,n=this.audioObject.duration/100*e;this.audioObject.currentTime=n},_onPlay:function(){navigator&&"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:this.track.name,artist:this.track.artist.name,album:this.track.album.name}),navigator.mediaSession.setActionHandler("play",this.play),navigator.mediaSession.setActionHandler("pause",this.pause),navigator.mediaSession.setActionHandler("seekbackward",function(){}),navigator.mediaSession.setActionHandler("seekforward",function(){}),navigator.mediaSession.setActionHandler("previoustrack",function(){}),navigator.mediaSession.setActionHandler("nexttrack",function(){}))},play:function(){var t=o(a.default.mark(function t(){var e=this;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.source||this.audioObject.src===this.source){t.next=4;break}return t.next=3,this.source;case 3:this.audioObject.src=t.sent;case 4:this.audioObject.play().then(function(){e.state="playing",e._onPlay()});case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),pause:function(){this.audioObject.pause(),this.state="paused"},stop:function(){this.audioObject.pause(),this.state="stopped",this.audioObject.currentTime=0},togglePlay:function(){"playing"===this.state?this.pause():this.play()}}),render:function(t){var e=this;return t("v-bottom-nav",{attrs:{fixed:!0,shift:!0,value:"true"},class:"playerDrawer"},[t("v-progress-linear",(0,r.default)([{class:"playerDrawer__progress",attrs:{value:e.timings.progress},on:{input:function(t){e.timings.progress=t}}},{directives:[{name:"model",value:e.timings.progress}]},{attrs:{height:"3"}},{on:{click:function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];e._jumpToTime.apply(e,[t].concat(r))}}}]),[]),t("v-icon",{class:"button"},["keyboard_arrow_up"]),t("span",{class:"playerDrawer__details"},[t("span",{class:"playerDrawer__details-track"},[this.track.name]),t("span",{class:"playerDrawer__details-track"},[this.track.artist.name," - ",this.track.album.name])]),t("v-icon",(0,r.default)([{class:"button"},{on:{click:function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];e.togglePlay.apply(e,[t].concat(r))}}}]),["playing"===this.state?"pause_circle":"play_circle_outline"])])}}},93:function(t,e){t.exports={playerDrawer:"playerDrawer",playerDrawer__progress:"playerDrawer__progress",button:"button",playerDrawer__details:"playerDrawer__details"}},94:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(31)),a=o(n(95)),i=o(n(96)),u=o(n(97));function o(t){return t&&t.__esModule?t:{default:t}}r.default.use(a.default),e.default=new a.default({mode:"hash",routes:[{path:"/",component:i.default,name:"Library"},{path:"/import",component:u.default,name:"Import"},{path:"/sync",component:u.default,name:"Sync"}]})},96:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,a=n(32),i=(r=a)&&r.__esModule?r:{default:r},u=n(22);e.default={data:function(){return{}},computed:Object.assign({},(0,u.mapGetters)(["library"]),{headers:function(){return[{text:"Title",value:"title",align:"left"},{text:"Length",value:"length"},{text:"Artist",value:"artist",align:"left"},{text:"Album",value:"album",align:"left"}]}}),methods:{displayTrackOptionsMenu:function(t){!0===confirm("Add track to queue?")&&this.queueTrack(t)},playTrack:function(t){this.$store.dispatch("playTrack",t),this.$router.push("/?play=true")},queueTrack:function(t){this.$store.dispatch("queueTrack",t)},trackRow:function(t){var e=this,n=this.$createElement;return n("tr",{on:{click:function(n){for(var r=arguments.length,a=Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];(function(){return e.playTrack(t.uuid)}).apply(void 0,[n].concat(a))}}},[n("td",null,[t.name]),n("td",null,[this.formatMilliseconds(t.length)]),n("td",null,[t.artist.name]),n("td",null,[t.album.name]),n("td",null,[n("v-icon",{on:{click:function(n){for(var r=arguments.length,a=Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];(function(){return e.displayTrackOptionsMenu(t.uuid)}).apply(void 0,[n].concat(a))}}},["more_horiz"])])])}},render:function(t){var e=this;return t("v-data-table",(0,i.default)([{attrs:{"hide-actions":!0,headers:this.headers,items:this.library},class:"elevation-1"},{scopedSlots:{items:function(t){return e.trackRow(t.item)}}}]),[])}}},97:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={render:function(){return(0,arguments[0])("p",null,["Dummy"])}}},98:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(31)),a=o(n(22)),i=o(n(99)),u=n(179);function o(t){return t&&t.__esModule?t:{default:t}}r.default.use(a.default);var s={deviceId:u.deviceId,theTrack:new Audio,currentTrackId:2,queuedTracks:[]},l=new a.default.Store({state:s,getters:{library:function(t){return t.library.tracks||!1},getTrackFromLibrary:function(t,e){return function(t){return e.library.find(function(e){return e.uuid===t})||!1}},currentTrack:function(t,e){var n=e.getTrackFromLibrary(t.currentTrackId);return n||!1},deviceId:function(t){return t.deviceId()}},mutations:{THE_TRACK_SETTER:function(t,e){t.theTrack=e},PLAY_TRACK:function(t,e){t.currentTrackId=e},QUEUE_TRACK:function(t,e){t.queuedTracks.push(e)}},actions:{playTrack:function(t,e){(0,t.commit)("PLAY_TRACK",e)},queueTrack:function(t,e){var n=t.commit;t.getters,n("QUEUE_TRACK",e)}},modules:{library:i.default}});e.default=l},99:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=l(n(60)),a=l(n(31)),i=l(n(22)),u=n(100),o=l(n(101)),s=l(n(119));function l(t){return t&&t.__esModule?t:{default:t}}n(120);n(123),n(162);var c=o.default.initializeApp({apiKey:"AIzaSyB6ozpHjiBNQx1OahIpcnFYGPIEHw_VxMc",authDomain:"soundplayer-55578.firebaseapp.com",databaseURL:"https://soundplayer-55578.firebaseio.com",projectId:"soundplayer-55578",storageBucket:"gs://soundplayer-55578.appspot.com",messagingSenderId:"506304420571"}),d=c.firestore(),f=c.storage(),p={tracks:d.collection("tracks"),albums:d.collection("albums"),artists:d.collection("artists")};a.default.use(i.default);var v=Object.assign({},u.firebaseMutations,{TOGGLE_CLOUD_LIBRARY:function(t,e){t.cloud=e},STORE_UPLOAD_WORKER:function(t,e){t.uploadWorker=e}}),h={setupCloudRefs:(0,u.firebaseAction)(function(t){var e=t.bindFirebaseRef;e("tracks",p.tracks),e("albums",p.albums),e("artists",p.artists)}),importItunesLibraryFile:function(t,e){t.commit;var n=new s.default;n.postMessage(e),n.addEventListener("message",function(t){var e=t.data,n=e.type,r=e.data;"update"===n?console.log("UPDATE",r):"error"===n?console.log("ERROR",r):"end"===n&&console.log("END",r)})},toggleCloudLibrary:function(t,e){(0,t.commit)("TOGGLE_CLOUD_LIBRARY",e)},uploadLibraryFiles:function(t){var e=t.dispatch,n=t.commit,r=t.getters,a=new s.default;return n("STORE_UPLOAD_WORKER",a),a.postMessage(r.uploadQueue),a.addEventListener("message",function(t){var n=t.data,r=n.type,a=n.data;"success"===r?e("updateTrack",a):"message"===r?console.log(a):"error"===r?console.log("ERROR",a):"end"===r&&console.log("END")}),!0},updateTrack:function(t,e){t.commit;p.tracks.doc(escape(e.name)).update({"src.cloud":!0})},getTrackCloudSrc:function(){var t,e=(t=r.default.mark(function t(e,n){e.commit;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.ref(n).getDownloadURL();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}),function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function r(a,i){try{var u=e[a](i),o=u.value}catch(t){return void n(t)}if(!u.done)return Promise.resolve(o).then(function(t){r("next",t)},function(t){r("throw",t)});t(o)}("next")})});return function(t,n){return e.apply(this,arguments)}}()};e.default={state:{tracks:[],artists:[],albums:[],cloud:!1,uploadWorker:!1},getters:{tracks:function(t){return t.tracks},artists:function(t){return t.artists},albums:function(t){return t.albums},recordExists:function(t){return function(e,n){var r=t[e].filter(function(t){return t.name===n});return r.length>0&&r}},uploadQueue:function(t){return t.tracks.filter(function(t){return!0!==t.src.cloud})},uploadWorker:function(t){return t.uploadWorker}},mutations:v,actions:h}}},[82]);
//# sourceMappingURL=client.3bde7aa6.js.map