{"version":3,"sources":["/Users/andrewhill/Documents/Web/2018/sound/client/workers/dummy.worker.js","/Users/andrewhill/Documents/Web/2018/sound/client/cross-platform.js","/Users/andrewhill/Documents/Web/2018/sound/client/pwa.js","/Users/andrewhill/Documents/Web/2018/sound/client/index.js","/Users/andrewhill/Documents/Web/2018/sound/client/promise-polyfill.js","/Users/andrewhill/Documents/Web/2018/sound/client/app.js","/Users/andrewhill/Documents/Web/2018/sound/client/components/App/index.js","/Users/andrewhill/Documents/Web/2018/sound/client/components/Sidebar/index.js","/Users/andrewhill/Documents/Web/2018/sound/client/components/PlayDrawer/index.js","/Users/andrewhill/Documents/Web/2018/sound/client/components/PlayDrawer/player.scss","/Users/andrewhill/Documents/Web/2018/sound/client/router/index.js","/Users/andrewhill/Documents/Web/2018/sound/client/views/Library/index.js","/Users/andrewhill/Documents/Web/2018/sound/client/views/dummy.js","/Users/andrewhill/Documents/Web/2018/sound/client/store/index.js","/Users/andrewhill/Documents/Web/2018/sound/client/store/library.js"],"names":["module","exports","Worker","__webpack_require__","p","deviceId","device","uuid","_runtime","_runtime2","default","install","onUpdateReady","console","log","applyUpdate","onUpdated","location","reload","_app","isCordovaApp","window","cordova","app","$mount","document","addEventListener","_promisePolyfill","Promise","_promisePolyfill2","_vuexRouterSync","mixins","sync","_store2","_router2","_vue2","mixin","methods","convertTimeHHMMSS","val","hhmmss","Date","toISOString","substr","indexOf","formatMilliseconds","decimal","minutes","Math","floor","seconds","use","_vueAxios2","_axios2","_vuetify2","Object","assign","router","store","_App2","data","open","components","Sidebar","created","this","$store","dispatch","render","h","_this","attrs","id","_babelHelperVueJsxMergeProps2","fixed","clipped","value","on","input","$$v","directives","name","_Sidebar2","header","fluid","fill-height","_PlayDrawer2","_openDrawer","_this2","$createElement","color","dark","clipped-left","style","$vuetify","breakpoint","smAndUp","class","click","$event","_len","arguments","length","Array","_key","apply","undefined","concat","$route","path","_vuex","props","computed","mapGetters","two-line","subheader","avatar","$router","push","currentTrack","artist","_len2","_key2","_len3","_key3","_len4","_key4","state","timings","progress","currentTime","totalDuration","raw","pretty","mapState","audioObject","get","theTrack","set","newValue","commit","source","_ref","_asyncToGenerator","_regenerator2","mark","_callee","currentMachine","wrap","_context","prev","next","sent","track","src","abrupt","cloud","getTrackCloudSrc","stop","getters","album","_handleLoaded","_handlePlayingUI","mapActions","parseInt","toFixed","duration","_jumpToTime","offset","pageX","screenX","timing","_onPlay","navigator","mediaSession","metadata","MediaMetadata","title","setActionHandler","play","pause","_ref2","_callee2","_context2","then","togglePlay","shift","height","playerDrawer","playerDrawer__progress","button","playerDrawer__details","_vueRouter2","mode","routes","component","headers","text","align","displayTrackOptionsMenu","confirm","queueTrack","playTrack","trackRow","hide-actions","items","library","scopedSlots","_items","item","_crossPlatform","_vuex2","Audio","currentTrackId","queuedTracks","Store","tracks","getTrackFromLibrary","find","mutations","THE_TRACK_SETTER","PLAY_TRACK","QUEUE_TRACK","actions","modules","_vuexfire","fb","_app2","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","firebasedb","firestore","storageRef","storage","db","collection","albums","artists","TOGGLE_CLOUD_LIBRARY","boolean","STORE_UPLOAD_WORKER","worker","uploadWorker","setupCloudRefs","firebaseAction","bindFirebaseRef","importItunesLibraryFile","child","_dummyWorker2","postMessage","e","_e$data","type","toggleCloudLibrary","_ref3","uploadLibraryFiles","_ref4","uploadQueue","_e$data2","updateTrack","_ref5","doc","escape","update","src.cloud","_ref7","_ref6","ref","getDownloadURL","_x","_x2","recordExists","filtered","filter","record"],"mappings":"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","file":"client.3bde7aa6.js","sourcesContent":["module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"b3ff83271d61385337da.worker.js\");\n};\n\n\n// WEBPACK FOOTER //\n// ./client/workers/dummy.worker.js","// #if process.env.TARGET_ENV === 'electron'\n// import { machineIdSync } from 'node-machine-id'\n// #endif\n\nconst deviceId = () => {\n  // #if process.env.TARGET_ENV === 'electron'\n//   return machineIdSync()\n  // #endif\n  // #endif\n\n  // #if process.env.TARGET_ENV !== 'mobile'\n//   // #if process.env.TARGET_ENV !== 'electron'\n//   return 'browser'\n//   // #endif\n  // #endif\n\n  // #if process.env.TARGET_ENV === 'mobile'\n  return device.uuid\n  // #endif\n}\n\nexport { deviceId }\n\n\n\n// WEBPACK FOOTER //\n// ./client/cross-platform.js","import runtime from 'offline-plugin/runtime'\n\nruntime.install({\n  // When an update is ready, tell ServiceWorker to take control immediately:\n  onUpdateReady () {\n    console.log('update ready')\n    runtime.applyUpdate()\n  },\n\n  // Reload to get the new version:\n  onUpdated () {\n    console.log('updated')\n    location.reload()\n  }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./client/pwa.js","import './promise-polyfill'\nimport { app } from './app'\nimport './global.scss'\nimport '../node_modules/vuetify/dist/vuetify.min.css'\nconst isCordovaApp = !!window.cordova\n\n// Enable progressive web app support (with offline-plugin)\nif (process.env.NODE_ENV === 'production') {\n  require('./pwa')\n}\n\napp.$mount('#app')\n\ndocument.addEventListener(\"deviceready\", onDeviceReady, false)\n\nfunction onDeviceReady () {\n  console.log('Device is ready!')\n  console.log(isCordovaApp)\n}\n\nif (isCordovaApp) {\n  console.log('This is cordova')\n  document.addEventListener('deviceready', app.$mount('#app'), false)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/index.js","import Promise from 'promise-polyfill'\n\nwindow.Promise = window.Promise || Promise\n\n\n\n// WEBPACK FOOTER //\n// ./client/promise-polyfill.js","import Vue from 'vue'\nimport { sync } from 'vuex-router-sync'\nimport App from './components/App'\nimport router from './router'\nimport store from './store'\nimport axios from 'axios'\nimport VueAxios from 'vue-axios'\nimport Vuetify from 'vuetify'\nconst mixins = require('./mixins.js')\n\nsync(store, router)\n\nVue.mixin({\n  methods: {\n    convertTimeHHMMSS (val) {\n      const hhmmss = new Date(val * 1000).toISOString().substr(11, 8)\n      return (hhmmss.indexOf('00:') === 0) ? hhmmss.substr(3) : hhmmss\n    },\n    formatMilliseconds (val) {\n      const decimal = (val / 60000)\n      const minutes = Math.floor(decimal)\n      const seconds = Math.floor(((decimal - minutes) * 60))\n      return (minutes > 9 ? minutes : '0' + minutes) + ':' + (seconds > 9 ? seconds : '0' + seconds)\n    }\n  }\n})\nVue.use(VueAxios, axios)\nVue.use(Vuetify)\n\nVue.use(mixins)\n\nconst app = new Vue({\n  router,\n  store,\n  ...App\n})\n\nexport { app, router, store }\n\n\n\n// WEBPACK FOOTER //\n// ./client/app.js","import './style.css'\nimport Sidebar from '../Sidebar'\nimport PlayDrawer from '../PlayDrawer'\n\nexport default {\n  data () {\n    return {\n      open: false\n    }\n  },\n  components: {\n    Sidebar\n  },\n  created () {\n    this.$store.dispatch('setupCloudRefs')\n  },\n  render (h) {\n    return (\n      <v-app id='app'>\n        <v-navigation-drawer id='sidebar' fixed clipped app v-model={this.open}>\n          <Sidebar />\n        </v-navigation-drawer>\n        { this.header() }\n        <v-content>\n          <v-container fluid fill-height>\n            <router-view></router-view>\n          </v-container>\n        </v-content>\n        <PlayDrawer />\n      </v-app>\n    )\n  },\n  methods: {\n    _openDrawer () {\n      this.open = !this.open\n    },\n    header () {\n      return (\n        <v-toolbar id='header' color='blue darken-3' dark app clipped-left fixed>\n          <v-toolbar-title style={this.$vuetify.breakpoint.smAndUp ? 'width: 300px; min-width: 250px' : 'min-width: 72px'} class='ml-0 pl-3'>\n            <v-toolbar-side-icon onClick={() => this._openDrawer()}></v-toolbar-side-icon>\n            <span class='hidden-xs-only'>{this.$route.name ? this.$route.name : this.$route.path}</span>\n          </v-toolbar-title>\n        </v-toolbar>\n      )\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/components/App/index.js","import { mapGetters } from 'vuex'\n\nexport default {\n  name: 'Sidebar',\n  props: ['open'],\n  computed: {\n    ...mapGetters(['currentTrack'])\n  },\n  render () {\n    return (\n        <v-list two-line subheader>\n          <v-subheader>Music</v-subheader>\n          <v-list-tile avatar on-click={() => this.$router.push({ name: 'Now Playing' })}>\n            <v-list-tile-action>\n              <v-icon>play_arrow</v-icon>\n            </v-list-tile-action>\n            { this.currentTrack\n              ? <v-list-tile-content>\n                  <v-list-tile-title>Now Playing</v-list-tile-title>\n                  <v-list-tile-sub-title>{this.currentTrack.name} - {this.currentTrack.artist.name}</v-list-tile-sub-title>\n                </v-list-tile-content>\n              : <v-list-tile-content style='opacity:0.5'>\n                  <v-list-tile-title>Now Playing</v-list-tile-title>\n                  <v-list-tile-sub-title>Nothing playing</v-list-tile-sub-title>\n                </v-list-tile-content> }\n          </v-list-tile>\n          <v-list-tile avatar on-click={() => this.$router.push({ name: 'Library' })}>\n            <v-list-tile-action>\n              <v-icon>library_music</v-icon>\n            </v-list-tile-action>\n            <v-list-tile-content>\n              <v-list-tile-title>Library</v-list-tile-title>\n              <v-list-tile-sub-title>View music library</v-list-tile-sub-title>\n            </v-list-tile-content>\n          </v-list-tile>\n          <v-subheader>Settings</v-subheader>\n          <v-list-tile avatar on-click={() => this.$router.push({ name: 'Sync' })}>\n            <v-list-tile-action>\n              <v-icon>import_export</v-icon>\n            </v-list-tile-action>\n            <v-list-tile-content>\n              <v-list-tile-title>Cloud sync</v-list-tile-title>\n              <v-list-tile-sub-title>Cloud library settings</v-list-tile-sub-title>\n            </v-list-tile-content>\n          </v-list-tile>\n          <v-list-tile avatar on-click={() => this.$router.push({ name: 'Import' })}>\n            <v-list-tile-action>\n              <v-icon>library_add</v-icon>\n            </v-list-tile-action>\n            <v-list-tile-content>\n              <v-list-tile-title>Import iTunes</v-list-tile-title>\n              <v-list-tile-sub-title>Import local iTunes library</v-list-tile-sub-title>\n            </v-list-tile-content>\n          </v-list-tile>\n        </v-list>\n    )\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./client/components/Sidebar/index.js","import { mapState, mapGetters, mapActions } from 'vuex'\nimport './player.scss'\n\nexport default {\n  data () {\n    return {\n      state: 'stopped',\n      timings: {\n        progress: 0,\n        currentTime: '0:00',\n        totalDuration: {\n          raw: 0,\n          pretty: '0:00'\n        }\n      }\n    }\n  },\n  computed: {\n    ...mapState(['theTrack']),\n    ...mapGetters(['deviceId']),\n    audioObject: {\n      get: function () {\n        return this.theTrack\n      },\n      set: function (newValue) {\n        this.$store.commit('THE_TRACK_SETTER', newValue)\n      }\n    },\n    async source () {\n      const currentMachine = await this.deviceId\n      if (currentMachine && this.track.src[currentMachine]) {\n        console.log(this.track.name + ': Playing from local machine')\n        return this.track.src[currentMachine]\n      } else if (this.track.src.cloud) {\n        console.log(this.track.name + ': Playing from cloud')\n        return await this.getTrackCloudSrc(this.track.uuid)\n      }\n      return false\n    },\n    track () {\n      return this.$store.getters.currentTrack || {artist: {}, album: {} }\n    }\n  },\n  created () {\n    if (this.audioObject.src) {\n      this._handleLoaded()\n      this._handlePlayingUI()\n    }\n    this.audioObject.addEventListener('timeupdate', this._handlePlayingUI)\n    this.audioObject.addEventListener('loadeddata', this._handleLoaded)\n  },\n  methods: {\n    ...mapActions(['getTrackCloudSrc']),\n    _handlePlayingUI () {\n      const currentTime = parseInt(this.audioObject.currentTime)\n      this.timings.progress = ((currentTime / this.timings.totalDuration.raw) * 100).toFixed(1)\n      this.timings.currentTime = this.convertTimeHHMMSS(currentTime)\n    },\n    _handleLoaded () {\n      const duration = parseInt(this.audioObject.duration)\n      this.timings.totalDuration = {\n        raw: duration,\n        pretty: this.convertTimeHHMMSS(duration)\n      }\n    },\n    _jumpToTime (click) {\n      console.log(click)\n      const offset = (click.pageX / click.screenX) * 100\n      const timing = (this.audioObject.duration / 100) * offset\n      this.audioObject.currentTime = timing\n    },\n    _onPlay () {\n      // On Android, customise media playback notification\n      if (navigator && 'mediaSession' in navigator) {\n        navigator.mediaSession.metadata = new MediaMetadata({\n          title: this.track.name,\n          artist: this.track.artist.name,\n          album: this.track.album.name\n        });\n        navigator.mediaSession.setActionHandler('play', this.play);\n        navigator.mediaSession.setActionHandler('pause', this.pause);\n        navigator.mediaSession.setActionHandler('seekbackward', function() {});\n        navigator.mediaSession.setActionHandler('seekforward', function() {});\n        navigator.mediaSession.setActionHandler('previoustrack', function() {});\n        navigator.mediaSession.setActionHandler('nexttrack', function() {});\n      }      \n    },\n    async play () {\n      if (this.source && this.audioObject.src !== this.source) {\n        this.audioObject.src = await this.source\n      }\n      this.audioObject.play().then(() => {\n        this.state = 'playing'\n        this._onPlay()\n      })\n    },\n    pause () {\n      this.audioObject.pause()\n      this.state = 'paused'\n    },\n    stop () {\n      this.audioObject.pause()\n      this.state = 'stopped'\n      this.audioObject.currentTime = 0\n    },\n    togglePlay () {\n      if (this.state === 'playing') {\n        this.pause()\n      } else {\n        this.play()\n      }\n    }\n  },\n  render (h) {\n    return (\n      <v-bottom-nav fixed={true} shift value=\"true\" class='playerDrawer'>\n        <v-progress-linear class='playerDrawer__progress' v-model={this.timings.progress} onClick={this._jumpToTime} height='3' />\n        <v-icon class='button'>keyboard_arrow_up</v-icon>\n        <span class='playerDrawer__details'>\n          <span class='playerDrawer__details-track'>{this.track.name}</span>\n          <span class='playerDrawer__details-track'>{this.track.artist.name} - {this.track.album.name}</span>\n        </span>\n        <v-icon class='button' onClick={this.togglePlay}>{this.state === 'playing' ? 'pause_circle' : 'play_circle_outline'}</v-icon>\n      </v-bottom-nav>\n    )\n    /*\n      <div class='player__holder'>\n        <img class='player__artwork' src={this.track.artwork} />\n        <div class='player__controls'>\n          <button class='player__controls-button player__controls-play' onClick={this.play}>Play</button>\n          <button class='player__controls-button player__controls-pause' onClick={this.pause}>Pause</button>\n          <button class='player__controls-button player__controls-stop' onClick={this.stop}>Stop</button>\n        </div>\n        <div class='player__details'>\n          <span class='player__details-title'>{this.track.name}</span>\n          <span class='player__details-artist'>{this.track.artist.name}</span>\n          {this.track.album ? <span class='player__details-album'>{this.track.album.name}</span> : false }\n        </div>\n        <div class='player__progress'>\n          <div class='player__progress-bar' onClick={this._jumpToTime}>\n            <div class='player__progress-bar-fill' style={this.timings.progressStyle}></div>\n          </div>\n          <span class='player__progress-now'>{this.timings.currentTime}</span>\n          <span class='player__progress-total'>{this.timings.totalDuration.pretty}</span>\n        </div>\n      </div>\n    ) */\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/components/PlayDrawer/index.js","// removed by extract-text-webpack-plugin\nmodule.exports = {\"playerDrawer\":\"playerDrawer\",\"playerDrawer__progress\":\"playerDrawer__progress\",\"button\":\"button\",\"playerDrawer__details\":\"playerDrawer__details\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/components/PlayDrawer/player.scss\n// module id = 93\n// module chunks = 1","import Vue from 'vue'\nimport Router from 'vue-router'\nimport Library from '../views/Library'\n\n// #if process.env.TARGET_ENV !== 'electron'\nimport Sync from '../views/dummy.js'\nimport Import from '../views/dummy.js'\n// #endif\n// #if process.env.TARGET_ENV === 'electron'\n// import Sync from '../views/Sync'\n// import Import from '../views/Import'\n// #endif\n\nVue.use(Router)\n\nexport default new Router({\n  mode: 'hash',\n  routes: [\n    {\n      path: '/',\n      component: Library,\n      name: 'Library'\n    },\n    {\n      path: '/import',\n      component: Import,\n      name: 'Import'\n    },\n    {\n      path: '/sync',\n      component: Sync,\n      name: 'Sync'\n    }\n  ]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./client/router/index.js","import { mapGetters } from 'vuex'\n\nexport default {\n  data () {\n    return {\n    }\n  },\n  computed: {\n    ...mapGetters(['library']),\n    headers () {\n      return [\n        { text: 'Title', value: 'title', align: 'left' },\n        { text: 'Length', value: 'length' },\n        { text: 'Artist', value: 'artist', align: 'left' },\n        { text: 'Album', value: 'album', align: 'left' }\n      ]\n    }\n  },\n  methods: {\n    displayTrackOptionsMenu (uuid) {\n      const response = confirm('Add track to queue?') // eslint-disable-line\n      if (response === true) {\n        this.queueTrack(uuid)\n      }\n    },\n    playTrack (uuid) {\n      this.$store.dispatch('playTrack', uuid)\n      this.$router.push('/?play=true')\n    },\n    queueTrack (uuid) {\n      this.$store.dispatch('queueTrack', uuid)\n    },\n    trackRow (track) {\n      return (\n        <tr onClick={() => this.playTrack(track.uuid)}>\n          <td>{track.name}</td>\n          <td>{this.formatMilliseconds(track.length)}</td>\n          <td>{track.artist.name}</td>\n          <td>{track.album.name}</td>\n          <td>\n            <v-icon onClick={() => this.displayTrackOptionsMenu(track.uuid)}>more_horiz</v-icon>\n          </td>\n        </tr>\n      )\n    }\n  },\n  render (h) {\n    return (\n      <v-data-table hide-actions headers={this.headers} items={this.library} class='elevation-1' { ...{\n        scopedSlots: {\n          items: items => {\n            return this.trackRow(items.item)\n          }\n        }\n      } }></v-data-table>\n    )\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/views/Library/index.js","export default {\n  render () {\n    return <p>Dummy</p>\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/views/dummy.js","import Vue from 'vue'\nimport Vuex from 'vuex'\nimport library from './library'\nimport { deviceId } from '../cross-platform.js'\n\nVue.use(Vuex)\n\nconst state = {\n  deviceId: deviceId,\n  theTrack: new Audio(),\n  currentTrackId: 2,\n  queuedTracks: []\n}\n\nconst getters = {\n  library: (state) => {\n    return state.library.tracks || false\n  },\n  getTrackFromLibrary: (state, getters) => (uuid) => {\n    return getters.library.find((track) => { return track['uuid'] === uuid }) || false\n  },\n  currentTrack: (state, getters) => {\n    const currentTrack = getters.getTrackFromLibrary(state.currentTrackId)\n    return currentTrack || false\n  },\n  deviceId: (state) => {\n    return state.deviceId()\n  }\n}\n\nconst mutations = {\n  THE_TRACK_SETTER (state, newValue) {\n    state.theTrack = newValue\n  },\n  PLAY_TRACK (state, uuid) {\n    state.currentTrackId = uuid\n  },\n  QUEUE_TRACK (state, uuid) {\n    state.queuedTracks.push(uuid)\n  }\n}\n\nconst actions = {\n  playTrack ({ commit }, uuid) {\n    commit('PLAY_TRACK', uuid)\n  },\n  queueTrack ({ commit, getters }, uuid) {\n    commit('QUEUE_TRACK', uuid)\n  }\n}\n\nconst store = new Vuex.Store({\n  state,\n  getters,\n  mutations,\n  actions,\n  modules: {\n    library: library\n  }\n})\n\nexport default store\n\n\n\n// WEBPACK FOOTER //\n// ./client/store/index.js","import Vue from 'vue'\nimport Vuex from 'vuex'\nimport { firebaseAction, firebaseMutations } from 'vuexfire'\nconst uuid = require('uuid/v1')\nimport firebase from 'firebase/app'\nrequire('firebase/firestore')\nrequire('firebase/storage')\n// #if process.env.TARGET_ENV === 'mobile'\nimport ImportWorker from '../workers/dummy.worker.js'\nimport UploadWorker from '../workers/dummy.worker.js'\n// #endif\n// #if process.env.TARGET_ENV !== 'mobile'\n// require('dotenv').config()\n// import ImportWorker from '../workers/importLibrary.worker.js'\n// import UploadWorker from '../workers/uploadLibrary.worker.js'\n// #endif\n\nconst fb = firebase.initializeApp({\n  apiKey: process.env.FIREBASE_KEY,\n  authDomain: process.env.FIREBASE_DOMAIN,\n  databaseURL: process.env.FIREBASE_URL,\n  projectId: process.env.FIREBASE_ID,\n  storageBucket: process.env.FIREBASE_BUCKET,\n  messagingSenderId: process.env.FIREBASE_SENDER\n})\n\nconst firebasedb = fb.firestore()\nconst storageRef = fb.storage()\n\nconst db = {\n  tracks: firebasedb.collection('tracks'),\n  albums: firebasedb.collection('albums'),\n  artists: firebasedb.collection('artists')\n}\n\nVue.use(Vuex)\n\nconst state = {\n  tracks: [],\n  artists: [],\n  albums: [],\n  cloud: false,\n  uploadWorker: false\n}\n\nconst getters = {\n  tracks: state => state.tracks,\n  artists: state => state.artists,\n  albums: state => state.albums,\n  recordExists: (state) => (type, name) => {\n    const filtered = state[type].filter(record => record.name === name)\n    return (filtered.length > 0) ? filtered : false\n  },\n  uploadQueue: state => {\n    return state.tracks.filter(record => record.src.cloud !== true)\n  },\n  uploadWorker: state => { \n    return state.uploadWorker\n  }\n}\n\nconst mutations = {\n  ...firebaseMutations,\n  TOGGLE_CLOUD_LIBRARY (state, boolean) {\n    state.cloud = boolean\n  },\n  STORE_UPLOAD_WORKER (state, worker) {\n    state.uploadWorker = worker\n  }\n}\n\nconst actions = {\n  setupCloudRefs: firebaseAction(({ bindFirebaseRef }) => {\n    bindFirebaseRef('tracks', db.tracks)\n    bindFirebaseRef('albums', db.albums)\n    bindFirebaseRef('artists', db.artists)\n  }),\n  importItunesLibraryFile ({ commit }, path) {\n    const child = new ImportWorker()\n    child.postMessage(path)\n    child.addEventListener('message', (e) => {\n      const { type, data } = e.data\n      if (type === 'update') {\n        console.log('UPDATE', data)\n      } else if (type === 'error') {\n        console.log('ERROR', data)\n      } else if (type === 'end') {\n        console.log('END', data)\n      }\n    })\n  },\n  toggleCloudLibrary ({ commit }, boolean) {\n    commit('TOGGLE_CLOUD_LIBRARY', boolean)\n  },\n  uploadLibraryFiles ({ dispatch, commit, getters }) {\n    const child = new UploadWorker()\n    commit('STORE_UPLOAD_WORKER', child)\n    child.postMessage(getters.uploadQueue)\n    child.addEventListener('message', (e) => {\n      const { type, data } = e.data\n      if (type === 'success') {\n        dispatch('updateTrack', data)\n      } else if (type === 'message') {\n        console.log(data)\n      } else if (type === 'error') {\n        console.log('ERROR', data)\n      } else if (type === 'end') {\n        console.log('END')\n      }\n    })\n    return true\n  },\n  updateTrack ({ commit }, track) {\n    db.tracks.doc(escape(track.name)).update({ 'src.cloud': true })\n  },\n  async getTrackCloudSrc ({ commit }, uuid) {\n    return await storageRef.ref(uuid).getDownloadURL()\n  }\n}\n\nexport default {\n  state,\n  getters,\n  mutations,\n  actions\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/store/library.js"],"sourceRoot":""}