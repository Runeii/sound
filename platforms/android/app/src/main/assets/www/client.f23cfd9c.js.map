{"version":3,"sources":["/Users/andrewhill/Documents/Web/2018/sound/client/workers/dummy.worker.js","/Users/andrewhill/Documents/Web/2018/sound/client/cross-platform.js","/Users/andrewhill/Documents/Web/2018/sound/client/pwa.js","/Users/andrewhill/Documents/Web/2018/sound/client/index.js","/Users/andrewhill/Documents/Web/2018/sound/client/promise-polyfill.js","/Users/andrewhill/Documents/Web/2018/sound/client/app.js","/Users/andrewhill/Documents/Web/2018/sound/client/components/App/index.js","/Users/andrewhill/Documents/Web/2018/sound/client/router/index.js","/Users/andrewhill/Documents/Web/2018/sound/client/views/Player/index.js","/Users/andrewhill/Documents/Web/2018/sound/client/views/Player/player.scss","/Users/andrewhill/Documents/Web/2018/sound/client/views/Library/index.js","/Users/andrewhill/Documents/Web/2018/sound/client/views/dummy.js","/Users/andrewhill/Documents/Web/2018/sound/client/store/index.js","/Users/andrewhill/Documents/Web/2018/sound/client/store/library.js"],"names":["module","exports","Worker","__webpack_require__","p","deviceId","device","uuid","_runtime","_runtime2","default","install","onUpdateReady","console","log","applyUpdate","onUpdated","location","reload","_app","isCordovaApp","window","cordova","app","$mount","document","addEventListener","_promisePolyfill","Promise","_promisePolyfill2","_vuexRouterSync","mixins","sync","_store2","_router2","_vue2","mixin","methods","convertTimeHHMMSS","val","hhmmss","Date","toISOString","substr","indexOf","formatMilliseconds","decimal","minutes","Math","floor","seconds","use","_vueAxios2","_axios2","_vuetify2","Object","assign","router","store","_App2","_vuex","data","drawer","created","this","$store","dispatch","computed","mapGetters","sidebar","_this","h","$createElement","_babelHelperVueJsxMergeProps2","attrs","id","fixed","clipped","value","on","input","$$v","directives","name","two-line","subheader","avatar","click","$event","_len","arguments","length","Array","_key","$router","push","apply","undefined","concat","currentTrack","title","artist","style","_len2","_key2","_len3","_key3","_len4","_key4","render","header","fluid","fill-height","_openDrawer","_this2","color","dark","clipped-left","$vuetify","breakpoint","smAndUp","class","_len5","_key5","$route","path","_vueRouter2","mode","routes","component","timings","progressStyle","currentTime","totalDuration","raw","pretty","mapState","audioObject","get","theTrack","set","newValue","commit","source","_ref","_asyncToGenerator","_regenerator2","mark","_callee","wrap","_context","prev","next","track","src","deviceID","abrupt","cloud","getTrackCloudSrc","sent","stop","getters","_handleLoaded","_handlePlayingUI","mapActions","parseInt","currentTimeAsPercentage","toFixed","duration","_jumpToTime","offset","layerX","target","clientWidth","timing","_onPlay","navigator","mediaSession","metadata","MediaMetadata","album","setActionHandler","play","pause","_ref2","_callee2","_context2","testUpdate","artwork","holder","details","progress","progress-bar","progress-bar-fill","progress-total","headers","text","align","displayTrackOptionsMenu","confirm","queueTrack","playTrack","trackRow","hide-actions","items","library","scopedSlots","_items","item","_crossPlatform","_vuex2","state","Audio","currentTrackId","queuedTracks","Store","tracks","getTrackFromLibrary","find","mutations","THE_TRACK_SETTER","PLAY_TRACK","QUEUE_TRACK","actions","modules","_vuexfire","fb","_app2","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","firebasedb","firestore","storageRef","storage","db","collection","albums","artists","TOGGLE_CLOUD_LIBRARY","boolean","STORE_UPLOAD_WORKER","worker","uploadWorker","setupCloudRefs","firebaseAction","bindFirebaseRef","importItunesLibraryFile","child","_dummyWorker2","postMessage","e","_e$data","type","toggleCloudLibrary","_ref3","uploadLibraryFiles","_ref4","uploadQueue","_e$data2","updateTrack","_ref5","doc","escape","update","src.cloud","_ref7","_ref6","ref","getDownloadURL","_x","_x2","recordExists","filtered","filter","record"],"mappings":"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","file":"client.f23cfd9c.js","sourcesContent":["module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"b3ff83271d61385337da.worker.js\");\n};\n\n\n// WEBPACK FOOTER //\n// ./client/workers/dummy.worker.js","// #if process.env.TARGET_ENV === 'electron'\n// import { machineIdSync } from 'node-machine-id'\n// #endif\n\nconst deviceId = () => {\n  // #if process.env.TARGET_ENV === 'electron'\n//   return machineIdSync()\n  // #endif\n  // #endif\n\n  // #if process.env.TARGET_ENV !== 'mobile'\n//   // #if process.env.TARGET_ENV !== 'electron'\n//   return 'browser'\n//   // #endif\n  // #endif\n\n  // #if process.env.TARGET_ENV === 'mobile'\n  return device.uuid\n  // #endif\n}\n\nexport { deviceId }\n\n\n\n// WEBPACK FOOTER //\n// ./client/cross-platform.js","import runtime from 'offline-plugin/runtime'\n\nruntime.install({\n  // When an update is ready, tell ServiceWorker to take control immediately:\n  onUpdateReady () {\n    console.log('update ready')\n    runtime.applyUpdate()\n  },\n\n  // Reload to get the new version:\n  onUpdated () {\n    console.log('updated')\n    location.reload()\n  }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./client/pwa.js","import './promise-polyfill'\nimport { app } from './app'\nimport './global.scss'\nimport '../node_modules/vuetify/dist/vuetify.min.css'\nconst isCordovaApp = !!window.cordova\n\n// Enable progressive web app support (with offline-plugin)\nif (process.env.NODE_ENV === 'production') {\n  require('./pwa')\n}\n\napp.$mount('#app')\n\ndocument.addEventListener(\"deviceready\", onDeviceReady, false)\n\nfunction onDeviceReady () {\n  console.log('Device is ready!')\n  console.log(isCordovaApp)\n}\n\nif (isCordovaApp) {\n  console.log('This is cordova')\n  document.addEventListener('deviceready', app.$mount('#app'), false)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/index.js","import Promise from 'promise-polyfill'\n\nwindow.Promise = window.Promise || Promise\n\n\n\n// WEBPACK FOOTER //\n// ./client/promise-polyfill.js","import Vue from 'vue'\nimport { sync } from 'vuex-router-sync'\nimport App from './components/App'\nimport router from './router'\nimport store from './store'\nimport axios from 'axios'\nimport VueAxios from 'vue-axios'\nimport Vuetify from 'vuetify'\nconst mixins = require('./mixins.js')\n\nsync(store, router)\n\nVue.mixin({\n  methods: {\n    convertTimeHHMMSS (val) {\n      const hhmmss = new Date(val * 1000).toISOString().substr(11, 8)\n      return (hhmmss.indexOf('00:') === 0) ? hhmmss.substr(3) : hhmmss\n    },\n    formatMilliseconds (val) {\n      const decimal = (val / 60000)\n      const minutes = Math.floor(decimal)\n      const seconds = Math.floor(((decimal - minutes) * 60))\n      return (minutes > 9 ? minutes : '0' + minutes) + ':' + (seconds > 9 ? seconds : '0' + seconds)\n    }\n  }\n})\nVue.use(VueAxios, axios)\nVue.use(Vuetify)\n\nVue.use(mixins)\n\nconst app = new Vue({\n  router,\n  store,\n  ...App\n})\n\nexport { app, router, store }\n\n\n\n// WEBPACK FOOTER //\n// ./client/app.js","import { mapGetters } from 'vuex'\nimport './style.css'\n\nexport default {\n  data () {\n    return {\n      drawer: false\n    }\n  },\n  created () {\n    this.$store.dispatch('setupCloudRefs')\n  },\n  computed: {\n    ...mapGetters(['currentTrack']),\n    sidebar () {\n      return (\n        <v-navigation-drawer id='sidebar' fixed clipped app v-model={this.drawer}>\n          <v-list two-line subheader>\n            <v-subheader>Music</v-subheader>\n            <v-list-tile avatar on-click={() => this.$router.push({ name: 'Now Playing' })}>\n              <v-list-tile-action>\n                <v-icon>play_arrow</v-icon>\n              </v-list-tile-action>\n              { this.currentTrack['_id']\n                ? <v-list-tile-content>\n                    <v-list-tile-title>Now Playing</v-list-tile-title>\n                    <v-list-tile-sub-title>{this.currentTrack.title} - {this.currentTrack.artist}</v-list-tile-sub-title>\n                  </v-list-tile-content>\n                : <v-list-tile-content style='opacity:0.5'>\n                    <v-list-tile-title>Now Playing</v-list-tile-title>\n                    <v-list-tile-sub-title>Nothing playing</v-list-tile-sub-title>\n                  </v-list-tile-content> }\n            </v-list-tile>\n            <v-list-tile avatar on-click={() => this.$router.push({ name: 'Library' })}>\n              <v-list-tile-action>\n                <v-icon>library_music</v-icon>\n              </v-list-tile-action>\n              <v-list-tile-content>\n                <v-list-tile-title>Library</v-list-tile-title>\n                <v-list-tile-sub-title>View music library</v-list-tile-sub-title>\n              </v-list-tile-content>\n            </v-list-tile>\n          </v-list>\n          <v-list subheader>\n            <v-subheader>Settings</v-subheader>\n            <v-list-tile avatar on-click={() => this.$router.push({ name: 'Sync' })}>\n              <v-list-tile-action>\n                <v-icon>import_export</v-icon>\n              </v-list-tile-action>\n              <v-list-tile-content>\n                <v-list-tile-title>Cloud sync</v-list-tile-title>\n                <v-list-tile-sub-title>Cloud library settings</v-list-tile-sub-title>\n              </v-list-tile-content>\n            </v-list-tile>\n            <v-list-tile avatar on-click={() => this.$router.push({ name: 'Import' })}>\n              <v-list-tile-action>\n                <v-icon>library_add</v-icon>\n              </v-list-tile-action>\n              <v-list-tile-content>\n                <v-list-tile-title>Import iTunes</v-list-tile-title>\n                <v-list-tile-sub-title>Import local iTunes library</v-list-tile-sub-title>\n              </v-list-tile-content>\n            </v-list-tile>\n          </v-list>\n        </v-navigation-drawer>\n      )\n    }\n  },\n  render (h) {\n    return (\n      <v-app id='app'>\n        { this.sidebar }\n        { this.header() }\n        <v-content>\n          <v-container fluid fill-height>\n            <router-view></router-view>\n          </v-container>\n        </v-content>\n      </v-app>\n    )\n  },\n  methods: {\n    _openDrawer () {\n      this.drawer = !this.drawer\n    },\n    header () {\n      return (\n        <v-toolbar id='header' color='blue darken-3' dark app clipped-left fixed>\n          <v-toolbar-title style={this.$vuetify.breakpoint.smAndUp ? 'width: 300px; min-width: 250px' : 'min-width: 72px'} class='ml-0 pl-3'>\n            <v-toolbar-side-icon onClick={() => this._openDrawer()}></v-toolbar-side-icon>\n            <span class='hidden-xs-only'>{this.$route.name ? this.$route.name : this.$route.path}</span>\n          </v-toolbar-title>\n        </v-toolbar>\n      )\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/components/App/index.js","import Vue from 'vue'\nimport Router from 'vue-router'\nimport Player from '../views/Player'\nimport Library from '../views/Library'\n\n// #if process.env.TARGET_ENV !== 'electron'\nimport Sync from '../views/dummy.js'\nimport Import from '../views/dummy.js'\n// #endif\n// #if process.env.TARGET_ENV === 'electron'\n// import Sync from '../views/Sync'\n// import Import from '../views/Import'\n// #endif\n\nVue.use(Router)\n\nexport default new Router({\n  mode: 'hash',\n  routes: [\n    {\n      path: '/',\n      component: Player,\n      name: 'Now Playing'\n    },\n    {\n      path: '/library',\n      component: Library,\n      name: 'Library'\n    },\n    {\n      path: '/import',\n      component: Import,\n      name: 'Import'\n    },\n    {\n      path: '/sync',\n      component: Sync,\n      name: 'Sync'\n    }\n  ]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./client/router/index.js","import { mapState, mapGetters, mapActions } from 'vuex'\nimport './player.scss'\n\nexport default {\n  data () {\n    return {\n      timings: {\n        progressStyle: '',\n        currentTime: '0:00',\n        totalDuration: {\n          raw: 0,\n          pretty: '0:00'\n        }\n      }\n    }\n  },\n  computed: {\n    ...mapState(['theTrack']),\n    ...mapGetters(['deviceId']),\n    audioObject: {\n      get: function () {\n        return this.theTrack\n      },\n      set: function (newValue) {\n        this.$store.commit('THE_TRACK_SETTER', newValue)\n      }\n    },\n    async source () {\n      if (this.deviceId && this.track.src[this.deviceID]) {\n        return this.track.src[this.deviceId]\n      } else if (this.track.src.cloud) {\n        return await this.getTrackCloudSrc(this.track.uuid)\n      }\n      return false\n    },\n    track () {\n      return this.$store.getters.currentTrack\n    }\n  },\n  created () {\n    if (this.audioObject.src) {\n      this._handleLoaded()\n      this._handlePlayingUI()\n    }\n    this.audioObject.addEventListener('timeupdate', this._handlePlayingUI)\n    this.audioObject.addEventListener('loadeddata', this._handleLoaded)\n  },\n  methods: {\n    ...mapActions(['getTrackCloudSrc']),\n    _handlePlayingUI () {\n      const currentTime = parseInt(this.audioObject.currentTime)\n      const currentTimeAsPercentage = ((currentTime / this.timings.totalDuration.raw) * 100).toFixed(1)\n      this.timings.progressStyle = `right:${100 - currentTimeAsPercentage}%;`\n      this.timings.currentTime = this.convertTimeHHMMSS(currentTime)\n    },\n    _handleLoaded () {\n      const duration = parseInt(this.audioObject.duration)\n      this.timings.totalDuration = {\n        raw: duration,\n        pretty: this.convertTimeHHMMSS(duration)\n      }\n    },\n    _jumpToTime (click) {\n      const offset = (click.layerX / click.target.clientWidth) * 100\n      const timing = (this.audioObject.duration / 100) * offset\n      this.audioObject.currentTime = timing\n    },\n    _onPlay () {\n      // On Android, customise media playback notification\n      if (navigator && 'mediaSession' in navigator) {\n        navigator.mediaSession.metadata = new MediaMetadata({\n          title: this.track.name,\n          artist: this.track.artist.name,\n          album: this.track.album.name\n        });\n        navigator.mediaSession.setActionHandler('play', this.play);\n        navigator.mediaSession.setActionHandler('pause', this.pause);\n        navigator.mediaSession.setActionHandler('seekbackward', function() {});\n        navigator.mediaSession.setActionHandler('seekforward', function() {});\n        navigator.mediaSession.setActionHandler('previoustrack', function() {});\n        navigator.mediaSession.setActionHandler('nexttrack', function() {});\n      }      \n    },\n    async play () {\n      if (this.source && this.audioObject.src !== this.source) {\n        this.audioObject.src = await this.source\n      }\n      this.audioObject.play()\n      this._onPlay()\n    },\n    pause () {\n      this.audioObject.pause()\n    },\n    stop () {\n      this.audioObject.pause()\n      this.audioObject.currentTime = 0\n    },\n    testUpdate () {\n      this.$store.dispatch('updateTrack', [1, { artwork: 'https://i.scdn.co/image/31ff32e07215e719fe738d209d586ffe629b8425' }])\n    }\n  },\n  render (h) {\n    return (\n      <div class='player__holder'>\n        <img class='player__artwork' src={this.track.artwork} />\n        <div class='player__controls'>\n          <button class='player__controls-button player__controls-play' onClick={this.play}>Play</button>\n          <button class='player__controls-button player__controls-pause' onClick={this.pause}>Pause</button>\n          <button class='player__controls-button player__controls-stop' onClick={this.stop}>Stop</button>\n          <button onClick={this.testUpdate}>Update artwork</button>\n        </div>\n        <div class='player__details'>\n          <span class='player__details-title'>{this.track.name}</span>\n          <span class='player__details-artist'>{this.track.artist.name}</span>\n          {this.track.album ? <span class='player__details-album'>{this.track.album.name}</span> : false }\n        </div>\n        <div class='player__progress'>\n          <div class='player__progress-bar' onClick={this._jumpToTime}>\n            <div class='player__progress-bar-fill' style={this.timings.progressStyle}></div>\n          </div>\n          <span class='player__progress-now'>{this.timings.currentTime}</span>\n          <span class='player__progress-total'>{this.timings.totalDuration.pretty}</span>\n        </div>\n      </div>\n    )\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/views/Player/index.js","// removed by extract-text-webpack-plugin\nmodule.exports = {\"holder\":\"holder\",\"artwork\":\"artwork\",\"details\":\"details\",\"progress\":\"progress\",\"progress-bar\":\"progress-bar\",\"progress-bar-fill\":\"progress-bar-fill\",\"progress-total\":\"progress-total\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/views/Player/player.scss\n// module id = 94\n// module chunks = 1","import { mapGetters } from 'vuex'\n\nexport default {\n  data () {\n    return {\n    }\n  },\n  computed: {\n    ...mapGetters(['library']),\n    headers () {\n      return [\n        { text: 'Title', value: 'title', align: 'left' },\n        { text: 'Length', value: 'length' },\n        { text: 'Artist', value: 'artist', align: 'left' },\n        { text: 'Album', value: 'album', align: 'left' }\n      ]\n    }\n  },\n  methods: {\n    displayTrackOptionsMenu (uuid) {\n      const response = confirm('Add track to queue?') // eslint-disable-line\n      if (response === true) {\n        this.queueTrack(uuid)\n      }\n    },\n    playTrack (uuid) {\n      this.$store.dispatch('playTrack', uuid)\n      this.$router.push('/?play=true')\n    },\n    queueTrack (uuid) {\n      this.$store.dispatch('queueTrack', uuid)\n    },\n    trackRow (track) {\n      return (\n        <tr onClick={() => this.playTrack(track.uuid)}>\n          <td>{track.name}</td>\n          <td>{this.formatMilliseconds(track.length)}</td>\n          <td>{track.artist.name}</td>\n          <td>{track.album.name}</td>\n          <td>\n            <v-icon onClick={() => this.displayTrackOptionsMenu(track.uuid)}>more_horiz</v-icon>\n          </td>\n        </tr>\n      )\n    }\n  },\n  render (h) {\n    return (\n      <v-data-table hide-actions headers={this.headers} items={this.library} class='elevation-1' { ...{\n        scopedSlots: {\n          items: items => {\n            return this.trackRow(items.item)\n          }\n        }\n      } }></v-data-table>\n    )\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/views/Library/index.js","export default {\n  render () {\n    return <p>Dummy</p>\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/views/dummy.js","import Vue from 'vue'\nimport Vuex from 'vuex'\nimport library from './library'\nimport { deviceId } from '../cross-platform.js'\n\nVue.use(Vuex)\n\nconst state = {\n  deviceId: deviceId,\n  theTrack: new Audio(),\n  currentTrackId: 2,\n  queuedTracks: []\n}\n\nconst getters = {\n  library: (state) => {\n    return state.library.tracks || false\n  },\n  getTrackFromLibrary: (state, getters) => (uuid) => {\n    return getters.library.find((track) => { return track['uuid'] === uuid }) || false\n  },\n  currentTrack: (state, getters) => {\n    const currentTrack = getters.getTrackFromLibrary(state.currentTrackId)\n    return currentTrack || { album: {}, artist: {} }\n  },\n  deviceId: (state) => {\n    return state.deviceId()\n  }\n}\n\nconst mutations = {\n  THE_TRACK_SETTER (state, newValue) {\n    state.theTrack = newValue\n  },\n  PLAY_TRACK (state, uuid) {\n    state.currentTrackId = uuid\n  },\n  QUEUE_TRACK (state, uuid) {\n    state.queuedTracks.push(uuid)\n  }\n}\n\nconst actions = {\n  playTrack ({ commit }, uuid) {\n    commit('PLAY_TRACK', uuid)\n  },\n  queueTrack ({ commit, getters }, uuid) {\n    commit('QUEUE_TRACK', uuid)\n  }\n}\n\nconst store = new Vuex.Store({\n  state,\n  getters,\n  mutations,\n  actions,\n  modules: {\n    library: library\n  }\n})\n\nexport default store\n\n\n\n// WEBPACK FOOTER //\n// ./client/store/index.js","import Vue from 'vue'\nimport Vuex from 'vuex'\nimport { firebaseAction, firebaseMutations } from 'vuexfire'\nconst uuid = require('uuid/v1')\nimport firebase from 'firebase/app'\nrequire('firebase/firestore')\nrequire('firebase/storage')\n// #if process.env.TARGET_ENV === 'mobile'\nimport ImportWorker from '../workers/dummy.worker.js'\nimport UploadWorker from '../workers/dummy.worker.js'\n// #endif\n// #if process.env.TARGET_ENV !== 'mobile'\n// require('dotenv').config()\n// import ImportWorker from '../workers/importLibrary.worker.js'\n// import UploadWorker from '../workers/uploadLibrary.worker.js'\n// #endif\n\nconst fb = firebase.initializeApp({\n  apiKey: process.env.FIREBASE_KEY,\n  authDomain: process.env.FIREBASE_DOMAIN,\n  databaseURL: process.env.FIREBASE_URL,\n  projectId: process.env.FIREBASE_ID,\n  storageBucket: process.env.FIREBASE_BUCKET,\n  messagingSenderId: process.env.FIREBASE_SENDER\n})\n\nconst firebasedb = fb.firestore()\nconst storageRef = fb.storage()\n\nconst db = {\n  tracks: firebasedb.collection('tracks'),\n  albums: firebasedb.collection('albums'),\n  artists: firebasedb.collection('artists')\n}\n\nVue.use(Vuex)\n\nconst state = {\n  tracks: [],\n  artists: [],\n  albums: [],\n  cloud: false,\n  uploadWorker: false\n}\n\nconst getters = {\n  tracks: state => state.tracks,\n  artists: state => state.artists,\n  albums: state => state.albums,\n  recordExists: (state) => (type, name) => {\n    const filtered = state[type].filter(record => record.name === name)\n    return (filtered.length > 0) ? filtered : false\n  },\n  uploadQueue: state => {\n    return state.tracks.filter(record => record.src.cloud !== true)\n  },\n  uploadWorker: state => { \n    return state.uploadWorker\n  }\n}\n\nconst mutations = {\n  ...firebaseMutations,\n  TOGGLE_CLOUD_LIBRARY (state, boolean) {\n    state.cloud = boolean\n  },\n  STORE_UPLOAD_WORKER (state, worker) {\n    state.uploadWorker = worker\n  }\n}\n\nconst actions = {\n  setupCloudRefs: firebaseAction(({ bindFirebaseRef }) => {\n    bindFirebaseRef('tracks', db.tracks)\n    bindFirebaseRef('albums', db.albums)\n    bindFirebaseRef('artists', db.artists)\n  }),\n  importItunesLibraryFile ({ commit }, path) {\n    const child = new ImportWorker()\n    child.postMessage(path)\n    child.addEventListener('message', (e) => {\n      const { type, data } = e.data\n      if (type === 'update') {\n        console.log('UPDATE', data)\n      } else if (type === 'error') {\n        console.log('ERROR', data)\n      } else if (type === 'end') {\n        console.log('END', data)\n      }\n    })\n  },\n  toggleCloudLibrary ({ commit }, boolean) {\n    commit('TOGGLE_CLOUD_LIBRARY', boolean)\n  },\n  uploadLibraryFiles ({ dispatch, commit, getters }) {\n    const child = new UploadWorker()\n    commit('STORE_UPLOAD_WORKER', child)\n    child.postMessage(getters.uploadQueue)\n    child.addEventListener('message', (e) => {\n      const { type, data } = e.data\n      if (type === 'success') {\n        dispatch('updateTrack', data)\n      } else if (type === 'message') {\n        console.log(data)\n      } else if (type === 'error') {\n        console.log('ERROR', data)\n      } else if (type === 'end') {\n        console.log('END')\n      }\n    })\n    return true\n  },\n  updateTrack ({ commit }, track) {\n    db.tracks.doc(escape(track.name)).update({ 'src.cloud': true })\n  },\n  async getTrackCloudSrc ({ commit }, uuid) {\n    return await storageRef.ref(uuid).getDownloadURL()\n  }\n}\n\nexport default {\n  state,\n  getters,\n  mutations,\n  actions\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/store/library.js"],"sourceRoot":""}